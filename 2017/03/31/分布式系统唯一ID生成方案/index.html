<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="ä¹¦ä¸è®°ï¼Œç†Ÿè¯»å¯è®°ï¼›ä¹‰ä¸ç²¾ï¼Œç»†æ€å¯ç²¾ï¼›æƒŸæœ‰å¿—ä¸ç«‹ï¼Œç›´æ˜¯æ— ç€åŠ›å¤„ã€‚â€”â€”æœ±ç†¹" />

<meta name="baidu-site-verification" content="xSJDurVHbh" />

  <meta name="keywords" content="æµæ°´å·,åˆ†å¸ƒå¼," />



  <link rel="alternate" href="/atom.xml" title="å´å²–çš„è·¯,èµ°å‡ºè‡ªå·±çš„è„šæ­¥" type="application/atom+xml" />




  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆå¼ºçƒˆå»ºè®®é˜…è¯»åŸæ–‡ï¼šhttp://www.cnblogs.com/haoxinyue/p/5208136.html
ç³»ç»Ÿå”¯ä¸€IDæ˜¯æˆ‘ä»¬åœ¨è®¾è®¡ä¸€ä¸ªç³»ç»Ÿçš„æ—¶å€™å¸¸å¸¸ä¼šé‡è§çš„é—®é¢˜ï¼Œä¹Ÿå¸¸å¸¸ä¸ºè¿™ä¸ªé—®é¢˜è€Œçº ç»“ã€‚ç”ŸæˆIDçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œé€‚åº”ä¸åŒçš„åœºæ™¯ã€éœ€æ±‚ä»¥åŠæ€§èƒ½è¦æ±‚ã€‚æ‰€ä»¥æœ‰äº›æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿä¼šæœ‰å¤šä¸ªIDç”Ÿæˆçš„ç­–ç•¥ã€‚ä¸‹é¢å°±ä»‹ç»ä¸€äº›å¸¸è§çš„IDç”Ÿæˆç­–ç•¥ã€‚
1. æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µæœ€å¸¸è§çš„æ–¹å¼ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ">
<meta property="og:url" content="http://dingran.tk/2017/03/31/åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ/index.html">
<meta property="og:site_name" content="å´å²–çš„è·¯,èµ°å‡ºè‡ªå·±çš„è„šæ­¥">
<meta property="og:description" content="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆå¼ºçƒˆå»ºè®®é˜…è¯»åŸæ–‡ï¼šhttp://www.cnblogs.com/haoxinyue/p/5208136.html
ç³»ç»Ÿå”¯ä¸€IDæ˜¯æˆ‘ä»¬åœ¨è®¾è®¡ä¸€ä¸ªç³»ç»Ÿçš„æ—¶å€™å¸¸å¸¸ä¼šé‡è§çš„é—®é¢˜ï¼Œä¹Ÿå¸¸å¸¸ä¸ºè¿™ä¸ªé—®é¢˜è€Œçº ç»“ã€‚ç”ŸæˆIDçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œé€‚åº”ä¸åŒçš„åœºæ™¯ã€éœ€æ±‚ä»¥åŠæ€§èƒ½è¦æ±‚ã€‚æ‰€ä»¥æœ‰äº›æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿä¼šæœ‰å¤šä¸ªIDç”Ÿæˆçš„ç­–ç•¥ã€‚ä¸‹é¢å°±ä»‹ç»ä¸€äº›å¸¸è§çš„IDç”Ÿæˆç­–ç•¥ã€‚
1. æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µæœ€å¸¸è§çš„æ–¹å¼ã€‚">
<meta property="og:image" content="http://images2015.cnblogs.com/blog/15700/201602/15700-20160227213048721-177386520.png">
<meta property="og:image" content="http://images.blogjava.net/blogjava_net/dongbule/46046/o_111.PNG?_=5208136">
<meta property="og:updated_time" content="2017-03-31T05:37:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ">
<meta name="twitter:description" content="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆå¼ºçƒˆå»ºè®®é˜…è¯»åŸæ–‡ï¼šhttp://www.cnblogs.com/haoxinyue/p/5208136.html
ç³»ç»Ÿå”¯ä¸€IDæ˜¯æˆ‘ä»¬åœ¨è®¾è®¡ä¸€ä¸ªç³»ç»Ÿçš„æ—¶å€™å¸¸å¸¸ä¼šé‡è§çš„é—®é¢˜ï¼Œä¹Ÿå¸¸å¸¸ä¸ºè¿™ä¸ªé—®é¢˜è€Œçº ç»“ã€‚ç”ŸæˆIDçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œé€‚åº”ä¸åŒçš„åœºæ™¯ã€éœ€æ±‚ä»¥åŠæ€§èƒ½è¦æ±‚ã€‚æ‰€ä»¥æœ‰äº›æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿä¼šæœ‰å¤šä¸ªIDç”Ÿæˆçš„ç­–ç•¥ã€‚ä¸‹é¢å°±ä»‹ç»ä¸€äº›å¸¸è§çš„IDç”Ÿæˆç­–ç•¥ã€‚
1. æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µæœ€å¸¸è§çš„æ–¹å¼ã€‚">
<meta name="twitter:image" content="http://images2015.cnblogs.com/blog/15700/201602/15700-20160227213048721-177386520.png">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ | å´å²–çš„è·¯,èµ°å‡ºè‡ªå·±çš„è„šæ­¥ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  

  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?1fd05566bad2ab43a347777c12adcffd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">å´å²–çš„è·¯,èµ°å‡ºè‡ªå·±çš„è„šæ­¥</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            <i class="menu-item-icon icon-next-guestbook"></i> <br />
            ç•™è¨€æ¿
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            å…³äº
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', '87NaLcEoUCh3qeusbiok','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          å‘è¡¨äº
          <time itemprop="dateCreated" datetime="2017-03-31T11:46:29+08:00" content="2017-03-31">
            2017-03-31
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; åˆ†ç±»äº
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/åˆ†å¸ƒå¼/" itemprop="url" rel="index">
                  <span itemprop="name">åˆ†å¸ƒå¼</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
             
              <a href="/2017/03/31/åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/31/åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ/" itemprop="commentsCount"></span>
              </a>
             <!--
              <a href="/2017/03/31/åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ/#comments" itemprop="discussionUrl">
                <span>è¯„è®º</span>
              </a>
			  -->
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h1 id="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ"><a href="#åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ" class="headerlink" title="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ"></a>åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ</h1><p>å¼ºçƒˆå»ºè®®é˜…è¯»åŸæ–‡ï¼š<a href="http://www.cnblogs.com/haoxinyue/p/5208136.html" target="_blank" rel="external">http://www.cnblogs.com/haoxinyue/p/5208136.html</a></p>
<p>ç³»ç»Ÿå”¯ä¸€IDæ˜¯æˆ‘ä»¬åœ¨è®¾è®¡ä¸€ä¸ªç³»ç»Ÿçš„æ—¶å€™å¸¸å¸¸ä¼šé‡è§çš„é—®é¢˜ï¼Œä¹Ÿå¸¸å¸¸ä¸ºè¿™ä¸ªé—®é¢˜è€Œçº ç»“ã€‚ç”ŸæˆIDçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œé€‚åº”ä¸åŒçš„åœºæ™¯ã€éœ€æ±‚ä»¥åŠæ€§èƒ½è¦æ±‚ã€‚æ‰€ä»¥æœ‰äº›æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿä¼šæœ‰å¤šä¸ªIDç”Ÿæˆçš„ç­–ç•¥ã€‚ä¸‹é¢å°±ä»‹ç»ä¸€äº›å¸¸è§çš„IDç”Ÿæˆç­–ç•¥ã€‚</p>
<h2 id="1-æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µ"><a href="#1-æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µ" class="headerlink" title="1. æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µ"></a>1. æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µ</h2><p>æœ€å¸¸è§çš„æ–¹å¼ã€‚åˆ©ç”¨æ•°æ®åº“ï¼Œå…¨æ•°æ®åº“å”¯ä¸€ã€‚</p>
<h3 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h3><p>1ï¼‰ç®€å•ï¼Œä»£ç æ–¹ä¾¿ï¼Œæ€§èƒ½å¯ä»¥æ¥å—ã€‚</p>
<p>2ï¼‰æ•°å­—IDå¤©ç„¶æ’åºï¼Œå¯¹åˆ†é¡µæˆ–è€…éœ€è¦æ’åºçš„ç»“æœå¾ˆæœ‰å¸®åŠ©ã€‚</p>
<h3 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h3><p>1ï¼‰ä¸åŒæ•°æ®åº“è¯­æ³•å’Œå®ç°ä¸åŒï¼Œæ•°æ®åº“è¿ç§»çš„æ—¶å€™æˆ–å¤šæ•°æ®åº“ç‰ˆæœ¬æ”¯æŒçš„æ—¶å€™éœ€è¦å¤„ç†ã€‚</p>
<p>2ï¼‰åœ¨å•ä¸ªæ•°æ®åº“æˆ–è¯»å†™åˆ†ç¦»æˆ–ä¸€ä¸»å¤šä»çš„æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€ä¸ªä¸»åº“å¯ä»¥ç”Ÿæˆã€‚æœ‰å•ç‚¹æ•…éšœçš„é£é™©ã€‚</p>
<p>3ï¼‰åœ¨æ€§èƒ½è¾¾ä¸åˆ°è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒéš¾äºæ‰©å±•ã€‚</p>
<p>4ï¼‰å¦‚æœé‡è§å¤šä¸ªç³»ç»Ÿéœ€è¦åˆå¹¶æˆ–è€…æ¶‰åŠåˆ°æ•°æ®è¿ç§»ä¼šç›¸å½“ç—›è‹¦ã€‚</p>
<p>5ï¼‰åˆ†è¡¨åˆ†åº“çš„æ—¶å€™ä¼šæœ‰éº»çƒ¦ã€‚</p>
<h3 id="ä¼˜åŒ–æ–¹æ¡ˆï¼š"><a href="#ä¼˜åŒ–æ–¹æ¡ˆï¼š" class="headerlink" title="ä¼˜åŒ–æ–¹æ¡ˆï¼š"></a>ä¼˜åŒ–æ–¹æ¡ˆï¼š</h3><p>1ï¼‰é’ˆå¯¹ä¸»åº“å•ç‚¹ï¼Œå¦‚æœæœ‰å¤šä¸ªMasteråº“ï¼Œåˆ™æ¯ä¸ªMasteråº“è®¾ç½®çš„èµ·å§‹æ•°å­—ä¸ä¸€æ ·ï¼Œæ­¥é•¿ä¸€æ ·ï¼Œå¯ä»¥æ˜¯Masterçš„ä¸ªæ•°ã€‚æ¯”å¦‚ï¼šMaster1 ç”Ÿæˆçš„æ˜¯ 1ï¼Œ4ï¼Œ7ï¼Œ10ï¼ŒMaster2ç”Ÿæˆçš„æ˜¯2,5,8,11 Master3ç”Ÿæˆçš„æ˜¯ 3,6,9,12ã€‚è¿™æ ·å°±å¯ä»¥æœ‰æ•ˆç”Ÿæˆé›†ç¾¤ä¸­çš„å”¯ä¸€IDï¼Œä¹Ÿå¯ä»¥å¤§å¤§é™ä½IDç”Ÿæˆæ•°æ®åº“æ“ä½œçš„è´Ÿè½½ã€‚</p>
<h2 id="2-UUID"><a href="#2-UUID" class="headerlink" title="2. UUID"></a>2. UUID</h2><p>å¸¸è§çš„æ–¹å¼ã€‚å¯ä»¥åˆ©ç”¨æ•°æ®åº“ä¹Ÿå¯ä»¥åˆ©ç”¨ç¨‹åºç”Ÿæˆï¼Œä¸€èˆ¬æ¥è¯´å…¨çƒå”¯ä¸€ã€‚</p>
<h3 id="ä¼˜ç‚¹ï¼š-1"><a href="#ä¼˜ç‚¹ï¼š-1" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h3><p>1ï¼‰ç®€å•ï¼Œä»£ç æ–¹ä¾¿ã€‚</p>
<p>2ï¼‰ç”ŸæˆIDæ€§èƒ½éå¸¸å¥½ï¼ŒåŸºæœ¬ä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚</p>
<p>3ï¼‰å…¨çƒå”¯ä¸€ï¼Œåœ¨é‡è§æ•°æ®è¿ç§»ï¼Œç³»ç»Ÿæ•°æ®åˆå¹¶ï¼Œæˆ–è€…æ•°æ®åº“å˜æ›´ç­‰æƒ…å†µä¸‹ï¼Œå¯ä»¥ä»å®¹åº”å¯¹ã€‚</p>
<h3 id="ç¼ºç‚¹ï¼š-1"><a href="#ç¼ºç‚¹ï¼š-1" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h3><p>1ï¼‰æ²¡æœ‰æ’åºï¼Œæ— æ³•ä¿è¯è¶‹åŠ¿é€’å¢ã€‚</p>
<p>2ï¼‰UUIDå¾€å¾€æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²å­˜å‚¨ï¼ŒæŸ¥è¯¢çš„æ•ˆç‡æ¯”è¾ƒä½ã€‚</p>
<p>3ï¼‰å­˜å‚¨ç©ºé—´æ¯”è¾ƒå¤§ï¼Œå¦‚æœæ˜¯æµ·é‡æ•°æ®åº“ï¼Œå°±éœ€è¦è€ƒè™‘å­˜å‚¨é‡çš„é—®é¢˜ã€‚</p>
<p>4ï¼‰ä¼ è¾“æ•°æ®é‡å¤§</p>
<p>5ï¼‰ä¸å¯è¯»ã€‚</p>
<h2 id="3-UUIDçš„å˜ç§"><a href="#3-UUIDçš„å˜ç§" class="headerlink" title="3. UUIDçš„å˜ç§"></a>3. UUIDçš„å˜ç§</h2><p>1ï¼‰ä¸ºäº†è§£å†³UUIDä¸å¯è¯»ï¼Œå¯ä»¥ä½¿ç”¨UUID to Int64çš„æ–¹æ³•ã€‚åŠ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// &lt;summary&gt;</span></div><div class="line"><span class="comment">/// æ ¹æ®GUIDè·å–å”¯ä¸€æ•°å­—åºåˆ—</span></div><div class="line"><span class="comment">/// &lt;/summary&gt;</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">GuidToInt64</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">byte</span>[] bytes = Guid.NewGuid().ToByteArray();</div><div class="line">    <span class="keyword">return</span> BitConverter.ToInt64(bytes, <span class="number">0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2ï¼‰ä¸ºäº†è§£å†³UUIDæ— åºçš„é—®é¢˜ï¼ŒNHibernateåœ¨å…¶ä¸»é”®ç”Ÿæˆæ–¹å¼ä¸­æä¾›äº†Combç®—æ³•ï¼ˆcombined guid/timestampï¼‰ã€‚ä¿ç•™GUIDçš„10ä¸ªå­—èŠ‚ï¼Œç”¨å¦6ä¸ªå­—èŠ‚è¡¨ç¤ºGUIDç”Ÿæˆçš„æ—¶é—´ï¼ˆDateTimeï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// &lt;summary&gt; </span></div><div class="line"><span class="comment">/// Generate a new &lt;see cref="Guid"/&gt; using the comb algorithm. </span></div><div class="line"><span class="comment">/// &lt;/summary&gt; </span></div><div class="line"><span class="function"><span class="keyword">private</span> Guid <span class="title">GenerateComb</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">byte</span>[] guidArray = Guid.NewGuid().ToByteArray();</div><div class="line"> </div><div class="line">    DateTime baseDate = <span class="keyword">new</span> DateTime(<span class="number">1900</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">    DateTime now = DateTime.Now;</div><div class="line"> </div><div class="line">    <span class="comment">// Get the days and milliseconds which will be used to build    </span></div><div class="line">    <span class="comment">//the byte string    </span></div><div class="line">    TimeSpan days = <span class="keyword">new</span> TimeSpan(now.Ticks - baseDate.Ticks);</div><div class="line">    TimeSpan msecs = now.TimeOfDay;</div><div class="line"> </div><div class="line">    <span class="comment">// Convert to a byte array        </span></div><div class="line">    <span class="comment">// Note that SQL Server is accurate to 1/300th of a    </span></div><div class="line">    <span class="comment">// millisecond so we divide by 3.333333    </span></div><div class="line">    <span class="keyword">byte</span>[] daysArray = BitConverter.GetBytes(days.Days);</div><div class="line">    <span class="keyword">byte</span>[] msecsArray = BitConverter.GetBytes((<span class="keyword">long</span>)</div><div class="line">      (msecs.TotalMilliseconds / <span class="number">3.333333</span>));</div><div class="line"> </div><div class="line">    <span class="comment">// Reverse the bytes to match SQL Servers ordering    </span></div><div class="line">    Array.Reverse(daysArray);</div><div class="line">    Array.Reverse(msecsArray);</div><div class="line"> </div><div class="line">    <span class="comment">// Copy the bytes into the guid    </span></div><div class="line">    Array.Copy(daysArray, daysArray.Length - <span class="number">2</span>, guidArray,</div><div class="line">      guidArray.Length - <span class="number">6</span>, <span class="number">2</span>);</div><div class="line">    Array.Copy(msecsArray, msecsArray.Length - <span class="number">4</span>, guidArray,</div><div class="line">      guidArray.Length - <span class="number">4</span>, <span class="number">4</span>);</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Guid(guidArray);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”¨ä¸Šé¢çš„ç®—æ³•æµ‹è¯•ä¸€ä¸‹ï¼Œå¾—åˆ°å¦‚ä¸‹çš„ç»“æœï¼šä½œä¸ºæ¯”è¾ƒï¼Œå‰é¢3ä¸ªæ˜¯ä½¿ç”¨COMBç®—æ³•å¾—å‡ºçš„ç»“æœï¼Œæœ€å12ä¸ªå­—ç¬¦ä¸²æ˜¯æ—¶é—´åºï¼ˆç»Ÿä¸€æ¯«ç§’ç”Ÿæˆçš„3ä¸ªUUIDï¼‰ï¼Œè¿‡æ®µæ—¶é—´å¦‚æœå†æ¬¡ç”Ÿæˆï¼Œåˆ™12ä¸ªå­—ç¬¦ä¸²ä¼šæ¯”å›¾ç¤ºçš„è¦å¤§ã€‚åé¢3ä¸ªæ˜¯ç›´æ¥ç”Ÿæˆçš„GUIDã€‚</p>
<p><img src="http://images2015.cnblogs.com/blog/15700/201602/15700-20160227213048721-177386520.png" alt="http://images2015.cnblogs.com/blog/15700/201602/15700-20160227213048721-177386520.png"></p>
<p>å¦‚æœæƒ³æŠŠæ—¶é—´åºæ”¾åœ¨å‰é¢ï¼Œå¯ä»¥ç”Ÿæˆåæ”¹å˜12ä¸ªå­—ç¬¦ä¸²çš„ä½ç½®ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ç®—æ³•ç±»çš„æœ€åä¸¤ä¸ªArray.Copyã€‚</p>
<h2 id="4-Redisç”ŸæˆID"><a href="#4-Redisç”ŸæˆID" class="headerlink" title="4. Redisç”ŸæˆID"></a>4. Redisç”ŸæˆID</h2><p>å½“ä½¿ç”¨æ•°æ®åº“æ¥ç”ŸæˆIDæ€§èƒ½ä¸å¤Ÿè¦æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨Redisæ¥ç”ŸæˆIDã€‚è¿™ä¸»è¦ä¾èµ–äºRedisæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨ç”Ÿæˆå…¨å±€å”¯ä¸€çš„IDã€‚å¯ä»¥ç”¨Redisçš„åŸå­æ“ä½œ INCRå’ŒINCRBYæ¥å®ç°ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨Redisé›†ç¾¤æ¥è·å–æ›´é«˜çš„ååé‡ã€‚å‡å¦‚ä¸€ä¸ªé›†ç¾¤ä¸­æœ‰5å°Redisã€‚å¯ä»¥åˆå§‹åŒ–æ¯å°Redisçš„å€¼åˆ†åˆ«æ˜¯1,2,3,4,5ï¼Œç„¶åæ­¥é•¿éƒ½æ˜¯5ã€‚å„ä¸ªRedisç”Ÿæˆçš„IDä¸ºï¼š</p>
<p>Aï¼š1,6,11,16,21</p>
<p>Bï¼š2,7,12,17,22</p>
<p>Cï¼š3,8,13,18,23</p>
<p>Dï¼š4,9,14,19,24</p>
<p>Eï¼š5,10,15,20,25</p>
<p>è¿™ä¸ªï¼Œéšä¾¿è´Ÿè½½åˆ°å“ªä¸ªæœºç¡®å®šå¥½ï¼Œæœªæ¥å¾ˆéš¾åšä¿®æ”¹ã€‚ä½†æ˜¯3-5å°æœåŠ¡å™¨åŸºæœ¬èƒ½å¤Ÿæ»¡è¶³å™¨ä¸Šï¼Œéƒ½å¯ä»¥è·å¾—ä¸åŒçš„IDã€‚ä½†æ˜¯æ­¥é•¿å’Œåˆå§‹å€¼ä¸€å®šéœ€è¦äº‹å…ˆéœ€è¦äº†ã€‚ä½¿ç”¨Redisé›†ç¾¤ä¹Ÿå¯ä»¥æ–¹å¼å•ç‚¹æ•…éšœçš„é—®é¢˜ã€‚</p>
<p>å¦å¤–ï¼Œæ¯”è¾ƒé€‚åˆä½¿ç”¨Redisæ¥ç”Ÿæˆæ¯å¤©ä»0å¼€å§‹çš„æµæ°´å·ã€‚æ¯”å¦‚è®¢å•å·=æ—¥æœŸ+å½“æ—¥è‡ªå¢é•¿å·ã€‚å¯ä»¥æ¯å¤©åœ¨Redisä¸­ç”Ÿæˆä¸€ä¸ªKeyï¼Œä½¿ç”¨INCRè¿›è¡Œç´¯åŠ ã€‚</p>
<h3 id="ä¼˜ç‚¹ï¼š-2"><a href="#ä¼˜ç‚¹ï¼š-2" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h3><p>1ï¼‰ä¸ä¾èµ–äºæ•°æ®åº“ï¼Œçµæ´»æ–¹ä¾¿ï¼Œä¸”æ€§èƒ½ä¼˜äºæ•°æ®åº“ã€‚</p>
<p>2ï¼‰æ•°å­—IDå¤©ç„¶æ’åºï¼Œå¯¹åˆ†é¡µæˆ–è€…éœ€è¦æ’åºçš„ç»“æœå¾ˆæœ‰å¸®åŠ©ã€‚</p>
<h3 id="ç¼ºç‚¹ï¼š-2"><a href="#ç¼ºç‚¹ï¼š-2" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h3><p>1ï¼‰å¦‚æœç³»ç»Ÿä¸­æ²¡æœ‰Redisï¼Œè¿˜éœ€è¦å¼•å…¥æ–°çš„ç»„ä»¶ï¼Œå¢åŠ ç³»ç»Ÿå¤æ‚åº¦ã€‚</p>
<p>2ï¼‰éœ€è¦ç¼–ç å’Œé…ç½®çš„å·¥ä½œé‡æ¯”è¾ƒå¤§ã€‚</p>
<h2 id="5-Twitterçš„snowflakeç®—æ³•"><a href="#5-Twitterçš„snowflakeç®—æ³•" class="headerlink" title="5. Twitterçš„snowflakeç®—æ³•"></a>5. Twitterçš„snowflakeç®—æ³•</h2><p>snowflakeæ˜¯Twitterå¼€æºçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œç»“æœæ˜¯ä¸€ä¸ªlongå‹çš„IDã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä½¿ç”¨41bitä½œä¸ºæ¯«ç§’æ•°ï¼Œ10bitä½œä¸ºæœºå™¨çš„IDï¼ˆ5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨IDï¼‰ï¼Œ12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·ï¼ˆæ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª IDï¼‰ï¼Œæœ€åè¿˜æœ‰ä¸€ä¸ªç¬¦å·ä½ï¼Œæ°¸è¿œæ˜¯0ã€‚å…·ä½“å®ç°çš„ä»£ç å¯ä»¥å‚çœ‹<a href="https://github.com/twitter/snowflakeã€‚" target="_blank" rel="external">https://github.com/twitter/snowflakeã€‚</a></p>
<p>C#ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line">/// &lt;summary&gt;</div><div class="line">    /// From: https://github.com/twitter/snowflake</div><div class="line">    /// An object that generates IDs.</div><div class="line">    /// This is broken into a separate class in case</div><div class="line">    /// we ever want to support multiple worker threads</div><div class="line">    /// per process</div><div class="line">    /// &lt;/summary&gt;</div><div class="line">    public class IdWorker</div><div class="line">    &#123;</div><div class="line">        private long workerId;</div><div class="line">        private long datacenterId;</div><div class="line">        private long sequence = 0L;</div><div class="line"></div><div class="line">        private static long twepoch = 1288834974657L;</div><div class="line"></div><div class="line">        private static long workerIdBits = 5L;</div><div class="line">        private static long datacenterIdBits = 5L;</div><div class="line">        private static long maxWorkerId = -1L ^ (-1L &lt;&lt; (int)workerIdBits);</div><div class="line">        private static long maxDatacenterId = -1L ^ (-1L &lt;&lt; (int)datacenterIdBits);</div><div class="line">        private static long sequenceBits = 12L;</div><div class="line"></div><div class="line">        private long workerIdShift = sequenceBits;</div><div class="line">        private long datacenterIdShift = sequenceBits + workerIdBits;</div><div class="line">        private long timestampLeftShift = sequenceBits + workerIdBits + datacenterIdBits;</div><div class="line">        private long sequenceMask = -1L ^ (-1L &lt;&lt; (int)sequenceBits);</div><div class="line"></div><div class="line">        private long lastTimestamp = -1L;</div><div class="line">        private static object syncRoot = new object();</div><div class="line"></div><div class="line">        public IdWorker(long workerId, long datacenterId)</div><div class="line">        &#123;</div><div class="line"></div><div class="line">            // sanity check for workerId</div><div class="line">            if (workerId &gt; maxWorkerId || workerId &lt; 0)</div><div class="line">            &#123;</div><div class="line">                throw new ArgumentException(string.Format(&quot;worker Id can&apos;t be greater than %d or less than 0&quot;, maxWorkerId));</div><div class="line">            &#125;</div><div class="line">            if (datacenterId &gt; maxDatacenterId || datacenterId &lt; 0)</div><div class="line">            &#123;</div><div class="line">                throw new ArgumentException(string.Format(&quot;datacenter Id can&apos;t be greater than %d or less than 0&quot;, maxDatacenterId));</div><div class="line">            &#125;</div><div class="line">            this.workerId = workerId;</div><div class="line">            this.datacenterId = datacenterId;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public long nextId()</div><div class="line">        &#123;</div><div class="line">            lock (syncRoot)</div><div class="line">            &#123;</div><div class="line">                long timestamp = timeGen();</div><div class="line"></div><div class="line">                if (timestamp &lt; lastTimestamp)</div><div class="line">                &#123;</div><div class="line">                    throw new ApplicationException(string.Format(&quot;Clock moved backwards.  Refusing to generate id for %d milliseconds&quot;, lastTimestamp - timestamp));</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                if (lastTimestamp == timestamp)</div><div class="line">                &#123;</div><div class="line">                    sequence = (sequence + 1) &amp; sequenceMask;</div><div class="line">                    if (sequence == 0)</div><div class="line">                    &#123;</div><div class="line">                        timestamp = tilNextMillis(lastTimestamp);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                else</div><div class="line">                &#123;</div><div class="line">                    sequence = 0L;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                lastTimestamp = timestamp;</div><div class="line"></div><div class="line">                return ((timestamp - twepoch) &lt;&lt; (int)timestampLeftShift) | (datacenterId &lt;&lt; (int)datacenterIdShift) | (workerId &lt;&lt; (int)workerIdShift) | sequence;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        protected long tilNextMillis(long lastTimestamp)</div><div class="line">        &#123;</div><div class="line">            long timestamp = timeGen();</div><div class="line">            while (timestamp &lt;= lastTimestamp)</div><div class="line">            &#123;</div><div class="line">                timestamp = timeGen();</div><div class="line">            &#125;</div><div class="line">            return timestamp;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        protected long timeGen()</div><div class="line">        &#123;</div><div class="line">            return (long)(DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc)).TotalMilliseconds;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">private static void TestIdWorker()</div><div class="line">        &#123;</div><div class="line">            HashSet&lt;long&gt; set = new HashSet&lt;long&gt;();</div><div class="line">            IdWorker idWorker1 = new IdWorker(0, 0);</div><div class="line">            IdWorker idWorker2 = new IdWorker(1, 0);</div><div class="line">            Thread t1 = new Thread(() =&gt; DoTestIdWoker(idWorker1, set));</div><div class="line">            Thread t2 = new Thread(() =&gt; DoTestIdWoker(idWorker2, set));</div><div class="line">            t1.IsBackground = true;</div><div class="line">            t2.IsBackground = true;</div><div class="line"></div><div class="line">            t1.Start();</div><div class="line">            t2.Start();</div><div class="line">            try</div><div class="line">            &#123;</div><div class="line">                Thread.Sleep(30000);</div><div class="line">                t1.Abort();</div><div class="line">                t2.Abort();</div><div class="line">            &#125;</div><div class="line">            catch (Exception e)</div><div class="line">            &#123;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            Console.WriteLine(&quot;done&quot;);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        private static void DoTestIdWoker(IdWorker idWorker, HashSet&lt;long&gt; set)</div><div class="line">        &#123;</div><div class="line">            while (true)</div><div class="line">            &#123;</div><div class="line">                long id = idWorker.nextId();</div><div class="line">                if (!set.Add(id))</div><div class="line">                &#123;</div><div class="line">                    Console.WriteLine(&quot;duplicate:&quot; + id);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                Thread.Sleep(1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>snowflakeç®—æ³•å¯ä»¥æ ¹æ®è‡ªèº«é¡¹ç›®çš„éœ€è¦è¿›è¡Œä¸€å®šçš„ä¿®æ”¹ã€‚æ¯”å¦‚ä¼°ç®—æœªæ¥çš„æ•°æ®ä¸­å¿ƒä¸ªæ•°ï¼Œæ¯ä¸ªæ•°æ®ä¸­å¿ƒçš„æœºå™¨æ•°ä»¥åŠç»Ÿä¸€æ¯«ç§’å¯ä»¥èƒ½çš„å¹¶å‘æ•°æ¥è°ƒæ•´åœ¨ç®—æ³•ä¸­æ‰€éœ€è¦çš„bitæ•°ã€‚</p>
<h3 id="ä¼˜ç‚¹ï¼š-3"><a href="#ä¼˜ç‚¹ï¼š-3" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h3><p>1ï¼‰ä¸ä¾èµ–äºæ•°æ®åº“ï¼Œçµæ´»æ–¹ä¾¿ï¼Œä¸”æ€§èƒ½ä¼˜äºæ•°æ®åº“ã€‚</p>
<p>2ï¼‰IDæŒ‰ç…§æ—¶é—´åœ¨å•æœºä¸Šæ˜¯é€’å¢çš„ã€‚</p>
<h3 id="ç¼ºç‚¹ï¼š-3"><a href="#ç¼ºç‚¹ï¼š-3" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h3><p>1ï¼‰åœ¨å•æœºä¸Šæ˜¯é€’å¢çš„ï¼Œä½†æ˜¯ç”±äºæ¶‰åŠåˆ°åˆ†å¸ƒå¼ç¯å¢ƒï¼Œæ¯å°æœºå™¨ä¸Šçš„æ—¶é’Ÿä¸å¯èƒ½å®Œå…¨åŒæ­¥ï¼Œä¹Ÿè®¸æœ‰æ—¶å€™ä¹Ÿä¼šå‡ºç°ä¸æ˜¯å…¨å±€é€’å¢çš„æƒ…å†µã€‚</p>
<h2 id="6-åˆ©ç”¨zookeeperç”Ÿæˆå”¯ä¸€ID"><a href="#6-åˆ©ç”¨zookeeperç”Ÿæˆå”¯ä¸€ID" class="headerlink" title="6. åˆ©ç”¨zookeeperç”Ÿæˆå”¯ä¸€ID"></a>6. åˆ©ç”¨zookeeperç”Ÿæˆå”¯ä¸€ID</h2><p>zookeeperä¸»è¦é€šè¿‡å…¶znodeæ•°æ®ç‰ˆæœ¬æ¥ç”Ÿæˆåºåˆ—å·ï¼Œå¯ä»¥ç”Ÿæˆ32ä½å’Œ64ä½çš„æ•°æ®ç‰ˆæœ¬å·ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬å·æ¥ä½œä¸ºå”¯ä¸€çš„åºåˆ—å·ã€‚<br>å¾ˆå°‘ä¼šä½¿ç”¨zookeeperæ¥ç”Ÿæˆå”¯ä¸€IDã€‚ä¸»è¦æ˜¯ç”±äºéœ€è¦ä¾èµ–zookeeperï¼Œå¹¶ä¸”æ˜¯å¤šæ­¥è°ƒç”¨APIï¼Œå¦‚æœåœ¨ç«äº‰è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œéœ€è¦è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼é”ã€‚å› æ­¤ï¼Œæ€§èƒ½åœ¨é«˜å¹¶å‘çš„åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œä¹Ÿä¸ç”šç†æƒ³ã€‚</p>
<h2 id="7-MongoDBçš„ObjectId"><a href="#7-MongoDBçš„ObjectId" class="headerlink" title="7. MongoDBçš„ObjectId"></a>7. MongoDBçš„ObjectId</h2><p>MongoDBçš„ObjectIdå’Œsnowflakeç®—æ³•ç±»ä¼¼ã€‚å®ƒè®¾è®¡æˆè½»é‡å‹çš„ï¼Œä¸åŒçš„æœºå™¨éƒ½èƒ½ç”¨å…¨å±€å”¯ä¸€çš„åŒç§æ–¹æ³•æ–¹ä¾¿åœ°ç”Ÿæˆå®ƒã€‚MongoDB ä»ä¸€å¼€å§‹å°±è®¾è®¡ç”¨æ¥ä½œä¸ºåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå¤„ç†å¤šä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ ¸å¿ƒè¦æ±‚ã€‚ä½¿å…¶åœ¨åˆ†ç‰‡ç¯å¢ƒä¸­è¦å®¹æ˜“ç”Ÿæˆå¾—å¤šã€‚</p>
<p>å…¶æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p><img src="http://images.blogjava.net/blogjava_net/dongbule/46046/o_111.PNG?_=5208136" alt="http://images.blogjava.net/blogjava_net/dongbule/46046/o_111.PNG?_=5208136"></p>
<p>å‰4 ä¸ªå­—èŠ‚æ˜¯ä»æ ‡å‡†çºªå…ƒå¼€å§‹çš„æ—¶é—´æˆ³ï¼Œå•ä½ä¸ºç§’ã€‚æ—¶é—´æˆ³ï¼Œä¸éšåçš„5 ä¸ªå­—èŠ‚ç»„åˆèµ·æ¥ï¼Œæä¾›äº†ç§’çº§åˆ«çš„å”¯ä¸€æ€§ã€‚ç”±äºæ—¶é—´æˆ³åœ¨å‰ï¼Œè¿™æ„å‘³ç€ObjectId å¤§è‡´ä¼šæŒ‰ç…§æ’å…¥çš„é¡ºåºæ’åˆ—ã€‚è¿™å¯¹äºæŸäº›æ–¹é¢å¾ˆæœ‰ç”¨ï¼Œå¦‚å°†å…¶ä½œä¸ºç´¢å¼•æé«˜æ•ˆç‡ã€‚è¿™4 ä¸ªå­—èŠ‚ä¹Ÿéšå«äº†æ–‡æ¡£åˆ›å»ºçš„æ—¶é—´ã€‚ç»å¤§å¤šæ•°å®¢æˆ·ç«¯ç±»åº“éƒ½ä¼šå…¬å¼€ä¸€ä¸ªæ–¹æ³•ä»ObjectId è·å–è¿™ä¸ªä¿¡æ¯ã€‚<br>æ¥ä¸‹æ¥çš„3 å­—èŠ‚æ˜¯æ‰€åœ¨ä¸»æœºçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚é€šå¸¸æ˜¯æœºå™¨ä¸»æœºåçš„æ•£åˆ—å€¼ã€‚è¿™æ ·å°±å¯ä»¥ç¡®ä¿ä¸åŒä¸»æœºç”Ÿæˆä¸åŒçš„ObjectIdï¼Œä¸äº§ç”Ÿå†²çªã€‚<br>ä¸ºäº†ç¡®ä¿åœ¨åŒä¸€å°æœºå™¨ä¸Šå¹¶å‘çš„å¤šä¸ªè¿›ç¨‹äº§ç”Ÿçš„ObjectId æ˜¯å”¯ä¸€çš„ï¼Œæ¥ä¸‹æ¥çš„ä¸¤å­—èŠ‚æ¥è‡ªäº§ç”ŸObjectId çš„è¿›ç¨‹æ ‡è¯†ç¬¦ï¼ˆPIDï¼‰ã€‚<br>å‰9 å­—èŠ‚ä¿è¯äº†åŒä¸€ç§’é’Ÿä¸åŒæœºå™¨ä¸åŒè¿›ç¨‹äº§ç”Ÿçš„ObjectId æ˜¯å”¯ä¸€çš„ã€‚å3 å­—èŠ‚å°±æ˜¯ä¸€ä¸ªè‡ªåŠ¨å¢åŠ çš„è®¡æ•°å™¨ï¼Œç¡®ä¿ç›¸åŒè¿›ç¨‹åŒä¸€ç§’äº§ç”Ÿçš„ObjectId ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚åŒä¸€ç§’é’Ÿæœ€å¤šå…è®¸æ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰2563ï¼ˆ16 777 216ï¼‰ä¸ªä¸åŒçš„ObjectIdã€‚</p>
<p>å®ç°çš„æºç å¯ä»¥åˆ°MongoDBå®˜æ–¹ç½‘ç«™ä¸‹è½½ã€‚</p>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/æµæ°´å·/" rel="tag">#æµæ°´å·</a>
          
            <a href="/tags/åˆ†å¸ƒå¼/" rel="tag">#åˆ†å¸ƒå¼</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/28/æ•°æ®åº“ç´¢å¼•indexä»‹ç»/" rel="next">æ•°æ®åº“ç´¢å¼•indexä»‹ç»</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2017/03/31/åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ/"
     data-title="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ"
     data-content=""
     data-url="http://dingran.tk/2017/03/31/åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">åˆ†äº«åˆ°ï¼š</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">å¾®åš</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQç©ºé—´</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">è…¾è®¯å¾®åš</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">å¾®ä¿¡</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>

 </div>

        

        
          <div class="comments" id="comments">
            
              <div class="ds-thread" data-thread-key="2017/03/31/åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ/"
                   data-title="åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ" data-url="http://dingran.tk/2017/03/31/åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ/">
              </div>
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.png" alt="ğŸ’‹D.RğŸ’˜" itemprop="image"/>
          <p class="site-author-name" itemprop="name">ğŸ’‹D.RğŸ’˜</p>
        </div>
        <p class="site-description motion-element" itemprop="description">ä¹¦ä¸è®°ï¼Œç†Ÿè¯»å¯è®°ï¼›ä¹‰ä¸ç²¾ï¼Œç»†æ€å¯ç²¾ï¼›æƒŸæœ‰å¿—ä¸ç«‹ï¼Œç›´æ˜¯æ— ç€åŠ›å¤„ã€‚â€”â€”æœ±ç†¹</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">78</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">66</span>
              <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="menu-item-icon icon-next-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
                <a href="https://github.com/MrDingran" target="_blank"><img style="width:28px;height:28px;margin: 0 8px 15px 8px;" src="/images/github.png"></img></a>
            
                <a href="https://www.zhihu.com/people/gavin-97-57" target="_blank"><img style="width:28px;height:28px;margin: 0 8px 15px 8px;" src="/images/zhihu.png"></img></a>
            
                <a href="https://www.facebook.com/ran.ding.509" target="_blank"><img style="width:28px;height:28px;margin: 0 8px 15px 8px;" src="/images/facebook.png"></img></a>
            
                <a href="https://twitter.com/MrDingran" target="_blank"><img style="width:28px;height:28px;margin: 0 8px 15px 8px;" src="/images/twitter.png"></img></a>
            
          
        </div>

        <div class="links-of-friendly motion-element">
          
        </div>

        
        

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ"><span class="nav-number">1.</span> <span class="nav-text">åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µ"><span class="nav-number">1.1.</span> <span class="nav-text">1. æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¼˜ç‚¹ï¼š"><span class="nav-number">1.1.1.</span> <span class="nav-text">ä¼˜ç‚¹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¼ºç‚¹ï¼š"><span class="nav-number">1.1.2.</span> <span class="nav-text">ç¼ºç‚¹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¼˜åŒ–æ–¹æ¡ˆï¼š"><span class="nav-number">1.1.3.</span> <span class="nav-text">ä¼˜åŒ–æ–¹æ¡ˆï¼š</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-UUID"><span class="nav-number">1.2.</span> <span class="nav-text">2. UUID</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¼˜ç‚¹ï¼š-1"><span class="nav-number">1.2.1.</span> <span class="nav-text">ä¼˜ç‚¹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¼ºç‚¹ï¼š-1"><span class="nav-number">1.2.2.</span> <span class="nav-text">ç¼ºç‚¹ï¼š</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-UUIDçš„å˜ç§"><span class="nav-number">1.3.</span> <span class="nav-text">3. UUIDçš„å˜ç§</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Redisç”ŸæˆID"><span class="nav-number">1.4.</span> <span class="nav-text">4. Redisç”ŸæˆID</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¼˜ç‚¹ï¼š-2"><span class="nav-number">1.4.1.</span> <span class="nav-text">ä¼˜ç‚¹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¼ºç‚¹ï¼š-2"><span class="nav-number">1.4.2.</span> <span class="nav-text">ç¼ºç‚¹ï¼š</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Twitterçš„snowflakeç®—æ³•"><span class="nav-number">1.5.</span> <span class="nav-text">5. Twitterçš„snowflakeç®—æ³•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¼˜ç‚¹ï¼š-3"><span class="nav-number">1.5.1.</span> <span class="nav-text">ä¼˜ç‚¹ï¼š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¼ºç‚¹ï¼š-3"><span class="nav-number">1.5.2.</span> <span class="nav-text">ç¼ºç‚¹ï¼š</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-åˆ©ç”¨zookeeperç”Ÿæˆå”¯ä¸€ID"><span class="nav-number">1.6.</span> <span class="nav-text">6. åˆ©ç”¨zookeeperç”Ÿæˆå”¯ä¸€ID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-MongoDBçš„ObjectId"><span class="nav-number">1.7.</span> <span class="nav-text">7. MongoDBçš„ObjectId</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
	<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="http://music.163.com/outchain/player?type=2&id=406086764&auto=0&height=66"></iframe>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ğŸ’‹D.RğŸ’˜</span>
	<span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <div class="powered-by"></div>
  <div class="powered-by">
    Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
  </div>
	<a class="theme-link" href="https://github.com/gavincloud">GitHub</a> å¼ºåŠ›é©±åŠ¨
  <!-- busuanzi -->
  

</div>

<!--
<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>
-->

<!--
<div class="powered-by"></div>
<div class="powered-by">
  ç”± <a class="theme-link" href="http://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>
-->

<!-- busuanzi -->
<!--

-->


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"dingran"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
